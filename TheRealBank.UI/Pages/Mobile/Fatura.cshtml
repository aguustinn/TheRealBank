@page
@model TheRealBank.UI.Pages.Mobile.FaturaModel
@{
    ViewData["Title"] = "Fatura do Cartão";
}

<style>
    /* CSS BASE DO SEU APLICATIVO (COPIADO) */
    .experience {
        --purple: #5e00a3;
        --green: #00c66e;
        --dark-gray: #333;
        --medium-gray: #888;
        --light-gray: #f0f2f5;
        --white: #ffffff;
        --border-color: #e0e0e0;
        display: flex;
        justify-content: center;
        padding: 16px 0;
        min-height: calc(100vh - 56px);
    }
    .experience .mobile-frame {
        width: 375px;
        height: 812px;
        background-color: var(--light-gray);
        border-radius: 40px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        position: relative;
        overflow: hidden;
        display: flex;
        flex-direction: column;
    }
    .experience .screen {
        flex-grow: 1;
        overflow-y: auto;
        padding-bottom: 80px;
        -webkit-overflow-scrolling: touch;
    }
    .experience .status-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 20px;
        background-color: var(--light-gray);
        font-size: 14px;
        font-weight: 600;
        color: var(--dark-gray);
    }
    .experience .status-bar .icons i { margin-left: 8px; }
    .experience .app-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 20px;
        background-color: var(--light-gray);
        position: sticky;
        top: 0;
        z-index: 10;
    }
    .experience .app-header .back-button {
        font-size: 20px;
        color: var(--purple);
        text-decoration: none;
    }
    .experience .app-header .header-title {
        font-size: 18px;
        font-weight: 600;
        color: var(--dark-gray);
        margin: 0;
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
    }
    .experience main { padding: 0 20px; }
    .experience section { margin-bottom: 20px; }
    
    .experience .bottom-nav {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 80px;
        background-color: var(--white);
        display: flex;
        justify-content: space-around;
        align-items: center;
        border-top: 1px solid var(--border-color);
        border-bottom-left-radius: 40px;
        border-bottom-right-radius: 40px;
    }
    .experience .mobile-nav-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-decoration: none;
        color: var(--medium-gray);
    }
    .experience .mobile-nav-item.active { color: var(--purple); }
    .experience .mobile-nav-item i { font-size: 22px; margin-bottom: 5px; }
    .experience .mobile-nav-item span { font-size: 12px; font-weight: 500; }
    
    /* Estilos das Abas (copiado do QR Code) */
    .experience .nav-tabs-creative {
        border-bottom: none;
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
    }
    .experience .nav-tabs-creative .nav-link {
        flex-grow: 1;
        text-align: center;
        background-color: var(--white);
        border: 1px solid var(--border-color);
        color: var(--medium-gray);
        font-weight: 600;
        border-radius: 10px;
        padding: 12px;
        transition: all 0.2s ease;
    }
    .experience .nav-tabs-creative .nav-link.active {
        background-color: var(--purple);
        color: var(--white);
        border-color: var(--purple);
        box-shadow: 0 4px 12px rgba(94,0,163,0.3);
    }
    
    /* Estilos de Lista (copiado do seu Layout.cshtml) */
    .experience .transaction-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px;
        background-color: var(--white);
        border: 1px solid var(--border-color);
        border-radius: 12px;
        text-decoration: none;
        color: var(--dark-gray);
        margin-bottom: 10px;
    }
    .experience .transaction-item .details { display: flex; align-items: center; }
    .experience .transaction-item .icon i {
        color: var(--purple);
        font-size: 20px;
        margin-right: 15px;
    }
    .experience .transaction-item .info h4 { font-size: 14px; font-weight: 600; margin: 0; }
    .experience .transaction-item .info p { font-size: 12px; color: var(--medium-gray); margin: 0; }
    .experience .transaction-item .amount { font-size: 14px; font-weight: 600; }
    .experience .transaction-item.debit .amount { color: #d9534f; }

    .experience .option-link {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px;
        background-color: var(--white);
        border: 1px solid var(--border-color);
        border-radius: 12px;
        text-decoration: none;
        color: var(--dark-gray);
        margin-bottom: 10px;
    }
    .experience .option-link .icon-text { display: flex; align-items: center; }
    .experience .option-link i { color: var(--purple); font-size: 20px; margin-right: 15px; }
    .experience .option-link .arrow { color: var(--medium-gray); }
    .experience .option-link .fatura-info { flex-grow: 1; }
    .experience .option-link .fatura-info h4 { font-size: 14px; font-weight: 600; margin: 0; }
    .experience .option-link .fatura-info p { font-size: 12px; color: var(--green); margin: 0; font-weight: 600; }
    .experience .option-link .fatura-valor { font-weight: 600; }

    /* --- NOVOS ESTILOS PARA A PÁGINA FATURA --- */

    .experience .fatura-hero-card {
        background: linear-gradient(135deg, var(--purple), #4a0083);
        color: var(--white);
        border-radius: 16px;
        padding: 25px;
        box-shadow: 0 10px 30px rgba(94,0,163,0.4);
    }
    .experience .fatura-hero-card .fatura-label {
        font-size: 14px;
        font-weight: 500;
        opacity: 0.8;
        margin-bottom: 5px;
    }
    .experience .fatura-hero-card .fatura-valor {
        font-size: 32px;
        font-weight: 700;
        margin: 0;
    }
    .experience .fatura-hero-card .fatura-info {
        font-size: 14px;
        font-weight: 500;
        opacity: 0.9;
        margin: 0;
    }
    .experience .fatura-hero-card .fatura-info + .fatura-info {
        margin-top: 4px;
    }
    
    /* Barra de Limite */
    .experience .limite-info {
        margin-top: 20px;
        font-size: 12px;
        font-weight: 500;
        display: flex;
        justify-content: space-between;
        opacity: 0.8;
        padding: 0 2px;
    }
    .experience .limite-progress-bar {
        width: 100%;
        height: 8px;
        background-color: rgba(255,255,255,0.2);
        border-radius: 4px;
        margin-top: 5px;
        overflow: hidden;
    }
    .experience .limite-progress-bar .progress-inner {
        height: 100%;
        background-color: var(--green);
        border-radius: 4px;
        box-shadow: 0 0 5px var(--green);
    }
    
    /* Botões de Ação */
    .experience .fatura-actions {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
    }
    .experience .btn-pagar, .experience .btn-parcelar {
        text-decoration: none;
        text-align: center;
        font-weight: 600;
        font-size: 14px;
        padding: 12px;
        border-radius: 10px;
        transition: all 0.2s ease;
    }
    .experience .btn-pagar {
        background-color: var(--green);
        color: var(--dark-gray);
        box-shadow: 0 4px 12px rgba(0, 198, 110, 0.3);
    }
    .experience .btn-pagar:hover {
        background-color: #00b363;
        transform: translateY(-2px);
    }
    .experience .btn-parcelar {
        background-color: var(--white);
        color: var(--dark-gray);
        border: 1px solid var(--border-color);
    }
    .experience .btn-parcelar:hover {
        background-color: #f8f9fa;
        transform: translateY(-2px);
    }

</style>

<div class="experience">
    <div class="mobile-frame">
        <div class="status-bar">
            <span class="time">12:08</span>
            <div class="icons">
                <i class="fas fa-signal"></i>
                <i class="fas fa-wifi"></i>
                <i class="fas fa-battery-full"></i>
            </div>
        </div>

        <div class="screen">
            <header class="app-header">
                <a asp-page="/Experiencia/Layout" class="back-button">
                    <i class="fas fa-chevron-left"></i>
                </a>
                <h1 class="header-title">Fatura do Cartão</h1>
                <div style="width: 20px;"></div>
            </header>

            <main>
                <section class="fatura-hero-card">
                    <p class="fatura-label">Fatura Atual</p>
                    <h2 class="fatura-valor">@Model.FaturaAtual.ToString("C")</h2>
                    <p class="fatura-info">Vence em: @Model.Vencimento.ToString("dd/MM/yyyy")</p>
                    <p class="fatura-info">Mínimo: @Model.PagamentoMinimo.ToString("C")</p>
                    
                    <div class="limite-info">
                        <span>Limite Usado</span>
                        <span>Disponível @Model.LimiteDisponivel.ToString("C")</span>
                    </div>
                    <div class="limite-progress-bar">
                        <div class="progress-inner" style="width: @Model.PercentualUsado%;"></div>
                    </div>
                </section>

                <section class="fatura-actions">
                    <a href="#" class="btn-pagar">Pagar Fatura</a>
                    <a href="#" class="btn-parcelar">Parcelar Fatura</a>
                </section>

                <ul class="nav nav-tabs-creative" id="faturaTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="lancamentos-tab" data-bs-toggle="tab" data-bs-target="#lancamentos" type="button" role="tab" aria-controls="lancamentos" aria-selected="true">
                            Lançamentos Atuais
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="historico-tab" data-bs-toggle="tab" data-bs-target="#historico" type="button" role="tab" aria-controls="historico" aria-selected="false">
                            Faturas Anteriores
                        </button>
                    </li>
                </ul>
                
                <div class="tab-content" id="faturaTabContent">
                    
                    <div class="tab-pane fade show active" id="lancamentos" role="tabpanel" aria-labelledby="lancamentos-tab">
                        @foreach (var lancamento in Model.LancamentosAtuais)
                        {
                            <a href="#" class="transaction-item debit">
                                <div class="details">
                                    <div class="icon"><i class="@lancamento.Icone"></i></div>
                                    <div class="info">
                                        <h4>@lancamento.Descricao</h4>
                                        <p>@lancamento.Data.ToString("dd/MM")</p>
                                    </div>
                                </div>
                                <span class="amount">- @lancamento.Valor.ToString("C")</span>
                            </a>
                        }
                    </div>

                    <div class="tab-pane fade" id="historico" role="tabpanel" aria-labelledby="historico-tab">
                        @foreach (var fatura in Model.FaturasAnteriores)
                        {
                            <a href="#" class="option-link">
                                <div class="icon-text">
                                    <i class="fas fa-file-invoice-dollar"></i>
                                    <div class="fatura-info">
                                        <h4>@fatura.MesAno</h4>
                                        <p>@fatura.Status</p>
                                    </div>
                                </div>
                                <span class="fatura-valor">@fatura.ValorTotal.ToString("C")</span>
                            </a>
                        }
                    </div>
                </div>
            </main>
        </div>

        <nav class="bottom-nav">
            <a asp-page="/Experiencia/Layout" class="mobile-nav-item">
                <i class="fas fa-user-circle"></i>
                <span>Sua conta</span>
            </a>
            <a href="#" class="mobile-nav-item">
                <i class="fas fa-chart-line"></i>
                <span>Investimentos</span>
            </a>
            <a href="#" class="mobile-nav-item">
                <i class="fas fa-cog"></i>
                <span>Configurações</span>
            </a>
        </nav>
    </div>
</div>